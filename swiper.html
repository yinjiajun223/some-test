<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>自动轮播-数字分页器</title>

    <!-- 引入 Swiper 的 CSS 文件 -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/swiper@8/swiper-bundle.min.css" />

    <style>
      /* 自定义全局样式，仅为演示效果 */
      body {
        background-color: #ffffff;
        margin: 0;
        font-family: sans-serif;
      }

      /* 轮播图容器的外部包装器 */
      .swiper-container-wrapper {
        width: 100%;
        padding-top: 50px;
        padding-bottom: 50px;
        position: relative; /* 添加相对定位，为分页器定位提供基准 */
      }

      /* Swiper 容器核心样式 */
      .swiper {
        width: 100%;
        height: 35vw;
      }

      /* 幻灯片核心样式 */
      .swiper-slide {
        width: 89vw;
        height: 100%;
        border-radius: 12px;
        background-position: center;
        background-size: cover;
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .swiper-slide img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 12px;
      }

      /* --- 分页器核心样式 --- */
      .swiper-pagination {
        /* 定位到右下角 */
        position: absolute;
        bottom: 20px;
        right: 20px;

        /* 覆盖 Swiper 默认的居中样式 */
        left: auto;
        transform: none;

        /* 确保容器宽度自适应内容 */
        width: auto;

        /* 使用 flex 布局让数字排列 */
        display: flex;
        gap: 15px; /* 数字之间的间距 */
      }

      /* 单个数字分页符的基础样式 */
      .swiper-pagination-custom-bullet {
        font-family:
          "Cabin", sans-serif; /* 使用英文字体以获得更好的数字显示效果 */
        font-size: 16px;
        font-weight: 500;
        color: #ffffff;
        opacity: 0.6; /* 默认半透明 */
        cursor: pointer;
        transition: opacity 0.3s ease;
      }

      /* 激活状态的数字分页符样式 */
      .swiper-pagination-custom-bullet-active {
        opacity: 1; /* 完全不透明 */
      }
    </style>
  </head>
  <body>
    <div class="swiper-container-wrapper">
      <!-- Swiper -->
      <div class="swiper mySwiper">
        <div class="swiper-wrapper">
          <!-- 幻灯片 1 -->
          <div class="swiper-slide">
            <img
              src="https://images.unsplash.com/photo-1542051841857-5f90071e7989?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"
              alt="日本街景1" />
          </div>
          <!-- 幻灯片 2 -->
          <div class="swiper-slide">
            <img
              src="https://images.unsplash.com/photo-1528164344705-47542687000d?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80"
              alt="日本街景2" />
          </div>
          <!-- 幻灯片 3 -->
          <div class="swiper-slide">
            <img
              src="https://images.unsplash.com/photo-1503899036084-c55cdd92da26?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1974&q=80"
              alt="日本街景3" />
          </div>
        </div>

        <!-- 分页器容器 -->
        <div class="swiper-pagination"></div>

        <!-- 导航按钮已从 HTML 中移除 -->
      </div>
    </div>

    <!-- 引入 Swiper 的 JS 文件 -->
    <script src="https://unpkg.com/swiper@8/swiper-bundle.min.js"></script>

    <!-- 初始化 Swiper -->
    <script>
      // 在初始化 Swiper 之前，先获取真实的幻灯片数量
      // 这一步对于在循环模式下正确渲染自定义分页器至关重要
      const realSlidesCount = document.querySelectorAll(
        ".mySwiper .swiper-slide"
      ).length;

      const swiper = new Swiper(".mySwiper", {
        // --- 核心配置 ---
        centeredSlides: true,
        slidesPerView: "auto",
        spaceBetween: 8,
        loop: true,

        // --- 新增：自动播放配置 ---
        autoplay: {
          delay: 3000, // 切换间隔时间，单位为毫秒
          disableOnInteraction: false, // 用户操作后不停止自动播放
        },

        // --- 修改：自定义分页器配置 ---
        pagination: {
          el: ".swiper-pagination",
          clickable: true, // 允许点击分页器切换
          type: "custom", // 设置为自定义类型
          // 自定义渲染函数
          renderCustom: function (swiper, current, total) {
            let paginationHtml = "";
            // 使用我们之前获取的真实幻灯片数量进行循环
            for (let i = 0; i < realSlidesCount; i++) {
              // 将数字格式化为 "01", "02" 等
              const number = String(i + 1).padStart(2, "0");
              // 判断当前激活的幻灯片真实索引是否匹配
              const activeClass =
                i === swiper.realIndex
                  ? "swiper-pagination-custom-bullet-active"
                  : "";
              // 生成带自定义类和 data-index 属性的 span 标签
              paginationHtml += `<span class="swiper-pagination-custom-bullet ${activeClass}" data-index="${i}">${number}</span>`;
            }
            return paginationHtml;
          },
        },

        // --- 移除：导航按钮配置 ---
        // navigation 属性已被完全移除
      });

      // --- 新增：为自定义分页器添加点击事件监听 ---
      const paginationContainer = document.querySelector(".swiper-pagination");
      if (paginationContainer) {
        paginationContainer.addEventListener("click", function (e) {
          // 确保点击的是我们的自定义分页符
          if (e.target.classList.contains("swiper-pagination-custom-bullet")) {
            // 从 data-index 属性获取索引
            const index = parseInt(e.target.getAttribute("data-index"), 10);
            // 跳转到对应的幻灯片（在循环模式下使用 slideToLoop）
            swiper.slideToLoop(index);
          }
        });
      }
    </script>
  </body>
</html>
